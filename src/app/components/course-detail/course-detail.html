<app-navbar></app-navbar>

<div class="detail-container">
  <!-- Loading State -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="loader"></div>
    <p>Cargando curso...</p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error && !isLoading">
    <div class="error-icon">âŒ</div>
    <h2>{{ error }}</h2>
    <button class="btn-back" (click)="goBack()">â† Volver al Dashboard</button>
  </div>

  <!-- Course Detail -->
  <div class="course-detail" *ngIf="course && !isLoading && !error">
    <!-- Back Button -->
    <button class="btn-back-floating" (click)="goBack()">
      â† Volver
    </button>

    <!-- Hero Section -->
    <div class="hero-section">
      <div class="hero-overlay"></div>
      <img [src]="course.thumbnail" [alt]="course.title" class="hero-image">
      <div class="hero-content">
        <span class="course-badge">{{ course.type }}</span>
        <h1>{{ course.title }}</h1>
        <div class="hero-meta">
          <span class="platform-tag">
            <span class="platform-emoji">{{ getPlatformLogo(course.platformId) }}</span>
            {{ course.platform }}
          </span>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="content-wrapper">
      <div class="main-content">
        <!-- Description Card -->
        <div class="info-card">
          <h2>ğŸ“– DescripciÃ³n del Curso</h2>
          <p class="description-text">{{ course.description }}</p>
        </div>

        <!-- What You'll Learn -->
        <div class="info-card">
          <h2>ğŸ¯ Lo que AprenderÃ¡s</h2>
          <ul class="learning-list">
            <li>Fundamentos y conceptos clave de {{ course.type }}</li>
            <li>Aplicaciones prÃ¡cticas y ejercicios</li>
            <li>Proyectos para reforzar el aprendizaje</li>
            <li>Certificado al completar el curso</li>
          </ul>
        </div>

        <!-- Course Requirements -->
        <div class="info-card">
          <h2>ğŸ“‹ Requisitos</h2>
          <ul class="requirements-list">
            <li *ngIf="course.level === 'BÃ¡sico'">No se requieren conocimientos previos</li>
            <li *ngIf="course.level === 'Intermedio'">Conocimientos bÃ¡sicos del tema</li>
            <li *ngIf="course.level === 'Avanzado'">Experiencia previa requerida</li>
            <li>ConexiÃ³n a internet</li>
            <li>Ganas de aprender ğŸš€</li>
          </ul>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Stats Card -->
        <div class="stats-card">
          <div class="stat-item">
            <span class="stat-icon">â±ï¸</span>
            <div class="stat-info">
              <span class="stat-label">DuraciÃ³n</span>
              <span class="stat-value">{{ course.duration }}</span>
            </div>
          </div>
          <div class="stat-item">
            <span class="stat-icon">ğŸ“Š</span>
            <div class="stat-info">
              <span class="stat-label">Nivel</span>
              <span class="stat-value level-badge" [ngClass]="course.level">{{ course.level }}</span>
            </div>
          </div>
          <div class="stat-item">
            <span class="stat-icon">â­</span>
            <div class="stat-info">
              <span class="stat-label">Rating</span>
              <div class="rating-container">
                <span class="stat-value">{{ course.rating }}</span>
                <div class="stars">
                  <span *ngFor="let star of getRatingStars(course.rating)" 
                        [class.filled]="star === 1">â˜…</span>
                </div>
              </div>
            </div>
          </div>
          <div class="stat-item">
            <span class="stat-icon">ğŸ‘¥</span>
            <div class="stat-info">
              <span class="stat-label">Estudiantes</span>
              <span class="stat-value">{{ course.students | number }}</span>
            </div>
          </div>
          
          <a [href]="course.url" target="_blank" class="btn-enroll">
            ğŸš€ Ir al Curso
          </a>
        </div>

        <!-- Share Card -->
        <div class="share-card">
          <h3>Compartir Curso</h3>
          <div class="share-buttons">
            <button class="share-btn" title="Copiar enlace">ğŸ“‹</button>
            <button class="share-btn" title="Compartir en Twitter">ğŸ¦</button>
            <button class="share-btn" title="Compartir en LinkedIn">ğŸ’¼</button>
            <button class="share-btn" title="Compartir por Email">ğŸ“§</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Related Courses -->
    <div class="related-section" *ngIf="relatedCourses.length > 0">
      <h2>ğŸ“š Cursos Relacionados</h2>
      <div class="related-grid">
        <div class="related-card" *ngFor="let related of relatedCourses" (click)="viewCourse(related.id)">
          <img [src]="related.thumbnail" [alt]="related.title">
          <div class="related-content">
            <span class="related-type">{{ related.type }}</span>
            <h3>{{ related.title }}</h3>
            <p class="related-platform">{{ related.platform }}</p>
            <div class="related-meta">
              <span>â­ {{ related.rating }}</span>
              <span>â±ï¸ {{ related.duration }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
